# 場景 ID 痛點分析：溝通與文件實作

## 概述

本文件深入分析兩個核心痛點場景，並從 AI 理解和文件實作的角度提出解決方案。

---

## 痛點 1：PM、RD、Designer 溝通時，沒有一個精確指出討論場景的方式

### 1.1 痛點場景描述

#### 場景 A：非同步溝通的歧義

**典型對話（Slack/Email）**：

```
PM: "關於那個點讚的場景，我們需要調整一下"
RD: "哪個點讚場景？是 Prematch Comment 的點讚，還是 Live Chat 的點讚？"
PM: "Prematch Comment 的"
RD: "是已登入的場景，還是未登入的場景？"
PM: "已登入的，就是用戶點擊 Like 按鈕，然後..."
RD: "哦，你是說那個 Optimistic UI 的場景嗎？"
PM: "對對對，就是那個"
```

**問題分析**：
- 非同步溝通中，上下文更容易丟失
- 需要多輪問答才能定位場景
- 容易產生誤解
- 溝通成本高

---

#### 場景 B：文件審查時的定位困難

**典型對話**：

```
PM: "這個 TDD 文件中的測試場景，對應到 PRD 的哪個場景？"
RD: "就是那個...用戶點擊 Like 按鈕，然後已登入的場景"
PM: "PRD 中有好幾個 Like 相關的場景，是哪一個？"
RD: "就是那個...在 Prematch Comment 頁面的，用戶已登入的場景"
PM: "我需要具體的場景編號或 ID"
RD: "PRD 中沒有編號，只有文字描述"
```

**問題分析**：
- 無法精確對應 PRD 場景與 TDD 場景
- 審查時需要大量時間定位場景
- 容易遺漏場景
- 審查效率低

---

### 1.2 場景 ID 解決方案

#### 1.2.1 統一場景識別方式

**使用場景 ID 後的對話**：

```
PM: "關於 PC-LikeComment-UserLoggedIn 這個場景，我們需要調整一下"
RD: "PC-LikeComment-UserLoggedIn，是那個『使用者已登入』的場景嗎？"
PM: "對，就是那個"
RD: "了解，需要調整什麼？"
```

**改善效果**：
- 定位場景只需 1 輪對話
- 溝通時間從 5-10 分鐘降低到 1-2 分鐘
- 理解偏差發生率從 30-40% 降低到 5-10%

---

#### 1.2.2 建立場景 ID 對照表

**場景 ID 對照表示例**：

| 場景 ID | 場景名稱 | 所屬 User Story | 描述 |
|---------|---------|----------------|------|
| PC-LikeComment-UserLoggedIn | 使用者已登入 | PC-LikeComment | 當用戶已登入時點擊 Like 按鈕的行為 |
| PC-LikeComment-UserNotLoggedIn | 使用者未登入 | PC-LikeComment | 當用戶未登入時點擊 Like 按鈕的行為 |
| PC-PublishComment-UserLoggedInWithNickname | 已登入且有 nickname | PC-PublishComment | 已登入且有 nickname 的用戶發表評論 |
| PC-PublishComment-UserLoggedInWithoutNickname | 已登入但無 nickname | PC-PublishComment | 已登入但無 nickname 的用戶發表評論 |

**使用方式**：
- PM、RD、Designer 都可以查閱對照表
- 討論時直接引用場景 ID
- 減少描述不清的問題

---

#### 1.2.3 場景 ID 在文件中的標註

**PRD 文件標註**：

```yaml
user_stories:
  - story_id: "PC-LikeComment"
    role: "用戶"
    action: "點讚其他用戶的評論"
    goal: "表達對評論的認同"
    priority: "P1"
    scenarios:
      - scenario_id: "PC-LikeComment-UserLoggedIn"
        name: "使用者已登入"
        description: "當用戶已登入時點擊 Like 按鈕的行為"
```

**設計稿標註**：

```
[設計稿截圖]
場景 ID: PC-LikeComment-UserLoggedIn
場景名稱: 使用者已登入
```

**TDD 文件標註**：

```markdown
## Test Scenarios

### Scenario: PC-LikeComment-UserLoggedIn - 使用者已登入

**對應 PRD 場景**: PC-LikeComment-UserLoggedIn
**對應 Flow**: PC-SUB-004
```

---

## 痛點 2：後續基於 PRD 所產出的文件沒有一個好的方式敘述那個場景，目前使用場景截圖搭配文字敘述的方式

### 2.1 痛點場景描述

#### 場景 A：設計稿中的場景描述

**目前做法**：

```
[設計稿截圖：用戶點擊 Like 按鈕的畫面]
文字描述：
- 用戶點擊 Like 按鈕
- 如果用戶已登入，立即更新 UI（Optimistic UI）
- Like 數 +1
- 按鈕變為已點讚狀態（紅色）
- 向後端發送請求
```

**問題分析**：
- 截圖無法被 AI 直接理解
- 文字描述不夠結構化
- 無法建立場景與其他文件的對應關係
- 無法進行自動化處理

---

#### 場景 B：TDD 文件中的場景描述

**目前做法**：

```
## Test Scenarios

### 場景：用戶點擊 Like 按鈕（已登入）

[截圖：用戶點擊 Like 按鈕的畫面]

**描述**：
當用戶已登入時點擊 Like 按鈕，系統會立即更新 UI（Optimistic UI），
Like 數 +1，按鈕變為已點讚狀態（紅色），然後向後端發送請求。

**測試步驟**：
1. 用戶點擊 Like 按鈕
2. 系統檢查用戶登入狀態
3. 系統立即更新 UI
4. 系統向後端發送請求
```

**問題分析**：
- 截圖無法被 AI 解析和理解
- 文字描述不夠精確
- 無法建立場景 ID 與測試案例的對應關係
- 無法進行自動化測試案例生成

---

#### 場景 C：flow_spec.yaml 中的場景描述

**目前做法**：

```yaml
scenarios:
  - name: 使用者已登入
    description: 當用戶已登入時點擊 Like 按鈕的行為
    condition: 使用者已登入
    actions:
      - PrematchComment Package 調用 Main App 的 APICoordinator.shared.accountManager 檢查登入狀態
      - Main App 回應已登入
      - PrematchComment Package 通過登入檢查
      - PrematchComment Package 立即更新畫面上的 Like 數（Optimistic UI）
      - PrematchComment Package 顯示已點讚狀態 + Like +1
      - PrematchComment Package 向伺服器發送 Like 請求
```

**問題分析**：
- 沒有場景 ID，無法對應到 PRD
- 描述不夠結構化
- 無法進行自動化處理

---

### 2.2 從 AI 理解的角度分析

#### 2.2.1 截圖 + 文字敘述的問題

##### 問題 1：AI 無法直接理解截圖內容

**技術限制**：
- 目前大多數 AI 模型（如 GPT-4）雖然支援圖像理解，但：
  - 圖像理解準確度不如文字理解
  - 圖像理解需要額外的計算資源
  - 圖像理解結果不夠穩定
  - 圖像理解無法進行精確的結構化提取

**實際影響**：
- AI 無法從截圖中精確提取場景資訊
- AI 無法建立場景與其他文件的對應關係
- AI 無法進行自動化場景處理

**範例**：

```
[截圖：用戶點擊 Like 按鈕的畫面]

AI 理解結果（不穩定）：
- "這是一個點讚功能的截圖"
- "用戶點擊了 Like 按鈕"
- "UI 顯示了已點讚狀態"
- 但無法精確理解：這是哪個場景？對應到哪個 PRD 場景？對應到哪個 Flow？
```

---

##### 問題 2：文字描述不夠結構化

**目前文字描述的問題**：

```
文字描述：
- 用戶點擊 Like 按鈕
- 如果用戶已登入，立即更新 UI（Optimistic UI）
- Like 數 +1
- 按鈕變為已點讚狀態（紅色）
- 向後端發送請求
```

**問題分析**：
- 沒有場景 ID，無法精確識別場景
- 沒有結構化的欄位（如 condition、actions、expected_result）
- 無法建立場景與其他文件的對應關係
- AI 無法進行自動化處理

**AI 處理困難**：
- AI 無法精確提取場景資訊
- AI 無法建立場景對應關係
- AI 無法進行自動化場景處理

---

##### 問題 3：無法建立場景對應關係

**目前做法**：

```
PRD 文件：
- "已登入用戶點擊 Like 按鈕的場景"

設計稿：
- [截圖] + "用戶點擊 Like 按鈕，已登入時的行為"

TDD 文件：
- [截圖] + "用戶點擊 Like 按鈕（已登入）"

flow_spec.yaml：
- name: "使用者已登入"
```

**問題分析**：
- 沒有統一的場景 ID
- 無法建立 PRD → 設計稿 → TDD → flow_spec.yaml 的對應關係
- AI 無法自動建立場景對應關係
- 需要人工對照，容易出錯

---

---

### 2.3 從文件實作的角度分析

#### 2.3.1 截圖 + 文字敘述的實作痛點

##### 痛點 1：截圖維護困難

**問題描述**：
- 截圖需要手動截取和更新
- 當 UI 變更時，需要重新截圖
- 截圖檔案管理困難（檔案命名、版本控制）
- 截圖無法進行版本對比

**實際影響**：
- 維護成本高
- 容易出現截圖與實際 UI 不一致的問題
- 版本控制困難

**範例**：

```
設計稿變更前：
[截圖：舊版 UI]

設計稿變更後：
[截圖：新版 UI]

問題：
- 需要手動更新所有相關截圖
- 容易遺漏某些截圖
- 無法自動檢測截圖是否需要更新
```

---

##### 痛點 2：文字描述不一致

**問題描述**：
- 不同文件中的場景描述可能不一致
- 無法自動檢查描述一致性
- 需要人工對照和修正

**實際影響**：
- 容易產生理解偏差
- 維護成本高
- 審查困難

**範例**：

```
PRD 文件：
"已登入用戶點擊 Like 按鈕的場景"

設計稿：
"用戶點擊 Like 按鈕，已登入時的行為"

TDD 文件：
"用戶點擊 Like 按鈕（已登入）"

問題：
- 描述不一致，容易產生理解偏差
- 無法自動檢查描述一致性
```

---

##### 痛點 3：無法進行自動化處理

**問題描述**：
- 截圖無法被程式解析
- 文字描述不夠結構化，無法自動提取資訊
- 無法建立場景對應關係
- 無法進行自動化檢查

**實際影響**：
- 無法進行自動化場景覆蓋率檢查
- 無法進行自動化場景對應關係建立
- 無法進行自動化測試案例生成

**範例**：

```
無法自動化處理的場景：
1. 檢查 TDD 測試場景是否覆蓋所有 PRD 場景
2. 檢查設計稿是否覆蓋所有 PRD 場景
3. 自動生成測試案例
4. 自動建立場景對應關係
```

---

---

## 三、解決方案參考

詳細的解決方案、優勢分析和改進方案，請參考：

- [場景 ID 解決方案：優勢與改進方案](./SCENARIO_ID_SOLUTION.md)

---

## 參考資料

- [場景 ID 解決方案：優勢與改進方案](./SCENARIO_ID_SOLUTION.md)
- [PRD User Story 場景 Unique ID 提案分析](./SCENARIO_ID_PROPOSAL.md)
- [場景 ID 語義化命名規則](./SCENARIO_ID_NAMING_RULES.md)

